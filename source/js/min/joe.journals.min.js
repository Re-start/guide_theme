!function(e,n){if("object"==typeof exports&&"object"==typeof module)module.exports=n();else if("function"==typeof define&&define.amd)define([],n);else{var o=n();for(var t in o)("object"==typeof exports?exports:e)[t]=o[t]}}(self,(function(){return n={initEffect:function(){ThemeConfig.enable_journal_effect&&new WOW({boxClass:"wow",animateClass:"fadeIn",offset:0,mobile:!0,live:!0}).init()},initLike:function(){if(ThemeConfig.enable_like_journal){var e=$(".joe_journal__item");e.length&&e.each((function(e,n){var o=$(this),t=o.attr("data-cid"),a=+(o.attr("data-clikes")||0),i=localStorage.getItem(encryption("agree-journal"))?JSON.parse(decrypt(localStorage.getItem(encryption("agree-journal")))):[],r=o.find(".journal-like"),l=o.find(".journal-unlike"),c=o.find(".journal-likes-num");i.includes(t)?(r.hide(),l.show()):(r.show(),l.hide()),c.html(a),r.on("click",(function(){var e=!1;if(!e){e=!0;var n=(i=localStorage.getItem(encryption("agree-journal"))?JSON.parse(decrypt(localStorage.getItem(encryption("agree-journal")))):[]).includes(t);$.ajax({url:"/api/content/journals/"+t+"/likes",type:"POST",dataType:"json",data:{type:n?"disagree":"agree"},success:function(e){if(200===e.status){var o=a;if(n){o--;var s=i.findIndex((function(e){return e===t}));i.splice(s,1),r.show(),l.hide()}else o++,i.push(t),r.hide(),l.show();var u=encryption("agree-journal"),f=encryption(JSON.stringify(i));localStorage.setItem(u,f),c.html(o)}},error:function(n){return e=!1,Qmsg.warning(n.responseJSON.message)},complete:function(){e=!1}})}}))}))}},initComment:function(){!ThemeConfig.enable_clean_mode&&ThemeConfig.enable_comment_journal&&$(".journal_comment_expander,.journal-comment").on("click",(function(){var e=$(this).parents(".footer-wrap"),n=e.find("halo-comment")[0]._wrapper.$refs.inner;e.hasClass("open")||n.loadComments(),e.toggleClass("open"),e.find(".journal_comment_expander_txt").html((e.hasClass("open")?"收起":"查看")+"评论")}))},initExpander:function(){$(".journal_content_expander i").on("click",(function(){$(this).parents(".joe_journal_body").toggleClass("open")}))},initCode:function(){$("pre[class*='language-']").length&&$("pre[class*='language-']").each((function(e,n){var o=$(n),t=$('<i class="joe-font joe-icon-arrow-downb code-expander" title="折叠/展开"></i>');t.on("click",(function(){var e=t.parent("pre").siblings(".toolbar").find(".autofold-tip");e&&e.remove(),t.parent("pre").toggleClass("close")})),o.prepend(t);var a=$(n).find("code[class*='language-']").text(),i=$('<span class="copy-button"><i class="joe-font joe-icon-copy" title="复制代码"></i></span>');new ClipboardJS(i[0],{text:function(){return a}}).on("success",(function(){return Qmsg.success("复制成功！")})),$(n).addClass("copyable").append(i)}))},foldBlock:function(){$(".joe_journal_body .content-wrp").each((function(){var e=$(this);e[0].getBoundingClientRect().height>270&&e.siblings(".journal_content_expander").show()}))},formatTime:function(){$(".joe_journal-posttime").each((function(){var e=$(this);e.html(Utils.timeAgo(e.text()))}))}},e=["formatTime","foldBlock"],document.addEventListener("DOMContentLoaded",(function(){Object.keys(n).forEach((function(o){return!e.includes(o)&&n[o]()}))})),window.addEventListener("load",(function(){n.foldBlock()})),{};var e,n}));